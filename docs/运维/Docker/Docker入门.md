# Docker 入门

---

参考：

```wiki
1. 尚硅谷官方学习笔记。 视频地址：https://www.bilibili.com/video/BV1Ls411n7mx?spm_id_from=333.999.0.0
```



## 相关概念

### Docker 的用途

- 在部署软件时，环境配置很麻烦，换一台机器，就要重来一次，费力费时。
- `Docker` 从根本上解决问题： **软件带环境安装** 。也就是说，安装的时候，把原始环境一模一样地复制过来（这样可以消除协作开发时 “只在我的机器上可正常工作” 的问题）。
- `Docker` 通过镜像 ( `images` )，将作业系统核心除外的运行应用程序所需要的系统环境，自下而上打包，达到应用程序跨平台间的无缝衔接运行。
- `Docker` 的理念： `Build，Ship and Run Any App , Anywhere` （在任何地方 构建、发布、和运行 任何应用）。
- `Docker` 是解决了 **运行环境和配置** 问题的 **软件容器** ，是有助于做 **持续集成** 和 **整体发布** 的 **容器虚拟化技术** 。

### 虚拟机与容器

#### 虚拟机

**virtual machine**

- 在一种操作系统里面运行另一种操作系统，比如在Windows 系统里面运行Linux 系统，应用程序对此毫无感知。
- 虚拟机看上去跟真实系统一模一样，而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其他部分毫无影响。
- 这类虚拟机完美的运行了另一套系统，能够使应用程序，操作系统和硬件三者之间的逻辑不变。

**但是如果要部署另一套环境就需要重新装个虚拟机，也就是重新装另一个操作系统。所以有以下缺点：**

- 资源占用多
- 冗余步骤多
- 启动慢

#### Linux 容器

**Linux Containers，缩写为 LXC。**

- Linux 容器化技术不是模拟一个完整的操作系统，而是对进程进行隔离，将软件运行所需的所有资源打包到一个隔离的容器中。
- 容器与虚拟机不同，不需要捆绑一整套操作系统，只需要软件工作所需的 **库资源和设置** 。
- 系统因此而变得 **高效轻量** 并保证部署在 **任何环境** 中的软件都能 **始终如一地运行** 。

#### 二者不同之处

- **传统虚拟机技术** 是 **虚拟出一套硬件后** ，在其上运行一个 **完整操作系统** ，在该系统上再运行 **所需应用进程** ；
- 而 **容器** 内的 **应用进程** 直接运行于 **宿主系统的内核** ，容器内部没有 **系统内核** ，而且也 **没有进行硬件虚拟** ，因此容器要比传统虚拟机更为 **轻便** 。
- 每个容器之间 **互相隔离** ，每个容器有自己的 **文件系统** ，容器之间进程 **不会相互影响** ，能 **区分计算资源** 。

### Docker 的优势总结

- 更轻量：基于容器的虚拟化，仅包含业务运行所需的 `runtime` 环境，如 `CentOS/Ubuntu` 基础镜像仅 `170M` ; 一台宿主机可部署 `100 ~ 1000` 个容器。
- 更高效： **无操作系统虚拟化开销** 
  - 计算：轻量，无额外开销
  - 存储：系统盘 `aufs/dm/overlayfs` ; 数据盘 `volume`
  - 网络：宿主机网络，NS隔离
- 更敏捷、更灵活：
  - 分层的存储和包管理，`devops` 理念。
  - 支持多种 **网络配置** 。、

### Docker 的三大要素

镜像、容器、仓库。

